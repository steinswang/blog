---
title: 联系人号码模糊查询
permalink: contacts-phone-number-fuzzy-search
categories:
  - Android
tags:
  - android
  - contacts
date: 2018-01-01 11:37:02
---

AOSP的联系人查询,匹配的号码是从头开始匹配,不支持任意子串的匹配.eg.1234567, 123能匹配, 456不能匹配。

首先由于这是个运营商的定制feature,加入的相应的overlay的flag.只有是该运营商才会进行模糊查询。

具体的流程就是修改ContactsProvider中的query流程. 原本的是match完全匹配。

主体部分：
先是进行判断,如果是该运营商,就修改查询的条件, 把字串前后加上通配符'%', 通过like关键字来进行模糊匹配.并返回结果。
如果不是该运营商, 就执行之前的默认的操作,并返回结果。

这样就实现了联系人号码模糊查询。
